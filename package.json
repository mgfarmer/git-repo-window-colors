{
    "name": "git-repo-window-colors",
    "displayName": "Git Repo Window Colors",
    "description": "Visually distinguish VS Code windows with configurable and automatic coloring based on repository, branch, or local folder. Supports customizable rules, reusable color profiles, and it works with your preferred theme, because you are in control.",
    "icon": "img/grwc-icon.png",
    "version": "1.5.21",
    "preview": true,
    "publisher": "KevinMills",
    "author": {
        "name": "Kevin Mills"
    },
    "engines": {
        "vscode": "^1.90.0"
    },
    "repository": {
        "type": "git",
        "url": "git@github.com:mgfarmer/git-repo-window-colors.git"
    },
    "categories": [
        "Other",
        "Themes"
    ],
    "keywords": [
        "color",
        "theme",
        "workspace",
        "folder",
        "customization"
    ],
    "extensionDependencies": [
        "vscode.git"
    ],
    "activationEvents": [
        "onStartupFinished"
    ],
    "main": "./out/extension",
    "prettier": {
        "singleQuote": true,
        "tabWidth": 4,
        "printWidth": 120
    },
    "contributes": {
        "commands": [
            {
                "command": "windowColors.colorize",
                "title": "Colorize this repo",
                "category": "GRWC"
            },
            {
                "command": "windowColors.decolorize",
                "title": "Decolorize this repo",
                "category": "GRWC"
            },
            {
                "command": "windowColors.openConfig",
                "title": "Open Configuration",
                "category": "GRWC"
            },
            {
                "command": "windowColors.clearFirstTimeFlag",
                "title": "Clear First Time Flag (Debug)",
                "category": "GRWC"
            },
            {
                "command": "windowColors.exportConfig",
                "title": "Export Configuration",
                "category": "GRWC"
            },
            {
                "command": "windowColors.importConfig",
                "title": "Import Configuration",
                "category": "GRWC"
            }
        ],
        "configuration": [
            {
                "type": "object",
                "title": "Git Repo Window Colors",
                "properties": {
                    "windowColors.repoConfigurationList": {
                        "order": 1,
                        "markdownDescription": "Repository-specific color rules. Each rule can be defined as a JSON object with properties `repoQualifier` (required), `primaryColor` (required), `profileName`, and `enabled` (default: true).\n\n**JSON Object Format (Recommended):**\n```json\n{\n  \"repoQualifier\": \"myrepo\",\n  \"primaryColor\": \"blue\",\n  \"enabled\": true,\n  \"branchRules\": [\n    {\"pattern\": \"^main$\", \"color\": \"green\"}\n  ]\n}\n```\n\n**Legacy String Format (Deprecated):**\n`<repo-qualifier>:<primary-color>` (e.g., `myrepo:blue`)\n\nThe `repoQualifier` is matched against the repository URL from `git config --get remote.origin.url`. The first matching rule is used. Colors can be CSS color names, hex values, or profile names. See: [Colors Tutorial](https://www.w3schools.com/colors/default.asp).",
                        "type": "array",
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "description": "Legacy format: <repo-qualifier>:<primary-color>"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "repoQualifier": {
                                            "type": "string",
                                            "description": "Repository identifier (matched against git remote URL)"
                                        },
                                        "primaryColor": {
                                            "type": "string",
                                            "description": "Primary color for title bar and activity bar (CSS color or profile name)"
                                        },
                                        "profileName": {
                                            "type": "string",
                                            "description": "Advanced profile name to use"
                                        },
                                        "enabled": {
                                            "type": "boolean",
                                            "default": true,
                                            "description": "Whether this rule is enabled"
                                        },
                                        "branchTableName": {
                                            "type": "string",
                                            "description": "Name of the shared branch table to use for this repository"
                                        },
                                        "branchRules": {
                                            "type": "array",
                                            "description": "Legacy local branch rules for this repository (deprecated, use branchTableName instead)"
                                        }
                                    },
                                    "required": [
                                        "repoQualifier",
                                        "primaryColor"
                                    ]
                                }
                            ]
                        },
                        "scope": "window",
                        "uniqueItems": true
                    },
                    "windowColors.removeManagedColors": {
                        "order": 2,
                        "type": "boolean",
                        "default": "true",
                        "description": "When no rules match, remove any colors that were set by this extension.  This is useful if you want to use the default colors for a repo that is not in the list. If this is unchecked, then you will need to remove any managed colors manually.",
                        "scope": "window"
                    },
                    "windowColors.branchConfigurationList": {
                        "order": 4,
                        "markdownDescription": "Branch-specific color rules that override repository rules. Each rule can be defined as a JSON object with properties `pattern` (required, regex), `color` (required), and `enabled` (default: true).\n\n**JSON Object Format (Recommended):**\n```json\n{\n  \"pattern\": \"^feature/.*\",\n  \"color\": \"green\",\n  \"enabled\": true\n}\n```\n\n**Legacy String Format (Deprecated):**\n`<branch-pattern>:<branch-color>` (e.g., `feature-.*:blue` or `bug-.*:red`)\n\nBranch patterns are regex expressions matched against the current branch name. The first matching rule is used. These rules apply to all repositories.",
                        "type": "array",
                        "items": {
                            "anyOf": [
                                {
                                    "type": "string",
                                    "description": "Legacy format: <branch-pattern>:<branch-color>"
                                },
                                {
                                    "type": "object",
                                    "properties": {
                                        "pattern": {
                                            "type": "string",
                                            "description": "Regex pattern to match branch name"
                                        },
                                        "color": {
                                            "type": "string",
                                            "description": "Branch color (CSS color or profile name)"
                                        },
                                        "enabled": {
                                            "type": "boolean",
                                            "default": true,
                                            "description": "Whether this rule is enabled"
                                        }
                                    },
                                    "required": [
                                        "pattern",
                                        "color"
                                    ]
                                }
                            ]
                        },
                        "default": [
                            "^(bug/|bug-.*):red",
                            "^(feature/|feature-).*:green",
                            "^(?!(main|master)$).*:purple"
                        ],
                        "scope": "window",
                        "uniqueItems": true
                    },
                    "windowColors.sharedBranchTables": {
                        "order": 5,
                        "markdownDescription": "Shared branch rule tables that can be referenced by repository rules. Each table contains a set of branch rules that can be reused across multiple repositories.\n\n**Format:**\n```json\n{\n  \"Default Rules\": {\n    \"rules\": [\n      {\"pattern\": \"^main$\", \"color\": \"blue\", \"enabled\": true},\n      {\"pattern\": \"^feature/.*\", \"color\": \"green\", \"enabled\": true}\n    ]\n  },\n  \"Custom Table\": {\n    \"rules\": [\n      {\"pattern\": \"^dev$\", \"color\": \"orange\", \"enabled\": true}\n    ]\n  }\n}\n```\n\nRepository rules reference tables using the `branchTableName` property. Tables can be created, renamed, and deleted through the configuration UI.",
                        "type": "object",
                        "additionalProperties": {
                            "type": "object",
                            "properties": {
                                "rules": {
                                    "type": "array",
                                    "description": "Array of branch rules in this table",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "pattern": {
                                                "type": "string",
                                                "description": "Regex pattern to match branch name"
                                            },
                                            "color": {
                                                "type": "string",
                                                "description": "Branch color (CSS color or profile name)"
                                            },
                                            "enabled": {
                                                "type": "boolean",
                                                "default": true,
                                                "description": "Whether this rule is enabled"
                                            }
                                        },
                                        "required": [
                                            "pattern",
                                            "color"
                                        ]
                                    }
                                }
                            },
                            "required": [
                                "rules"
                            ]
                        },
                        "default": {},
                        "scope": "window"
                    },
                    "windowColors.colorInactiveTitlebar": {
                        "order": 8,
                        "type": "boolean",
                        "default": "true",
                        "description": "Check to apply color changes to the inactive window title bar.",
                        "scope": "window"
                    },
                    "windowColors.colorEditorTabs": {
                        "order": 11,
                        "type": "boolean",
                        "default": "false",
                        "description": "Check to apply color changes to editor tabs (and sidebar title area).",
                        "scope": "window"
                    },
                    "windowColors.colorStatusBar": {
                        "order": 14,
                        "type": "boolean",
                        "default": "false",
                        "description": "Check to apply color changes to editor tabs (and sidebar title area).",
                        "scope": "window"
                    },
                    "windowColors.activityBarColorKnob": {
                        "order": 17,
                        "type": "number",
                        "maximum": 10,
                        "minimum": -10,
                        "default": 0,
                        "description": "Lighten or darken the non-title bar colors by this factor between -10 and 10. A value of zero is no difference.",
                        "scope": "window"
                    },
                    "windowColors.configSchemaVersion": {
                        "type": "number",
                        "default": 1,
                        "markdownDescription": "**Internal use only.** Current configuration schema version. Do not modify manually.",
                        "scope": "window",
                        "order": 9999
                    },
                    "windowColors.applyBranchColorToTabsAndStatusBar": {
                        "order": 19,
                        "type": "boolean",
                        "default": "false",
                        "description": "In addition to the Activity Bar, apply the branch color to the editor tabs and status bar",
                        "scope": "window"
                    },
                    "windowColors.showStatusIconWhenNoRuleMatches": {
                        "order": 26,
                        "type": "boolean",
                        "default": false,
                        "description": "When checked, the status bar icon is only shown when no rule matches the current repository. When unchecked, the status bar icon is always shown when the workspace is a git repository. The icon is never shown when the workspace is not a git repository.",
                        "scope": "window"
                    },
                    "windowColors.askToColorizeRepoWhenOpened": {
                        "order": 27,
                        "type": "boolean",
                        "default": true,
                        "description": "When enabled, the extension will ask if you'd like to colorize a repository when opening a workspace folder on a repository that doesn't match any existing rules.",
                        "scope": "window"
                    },
                    "windowColors.previewSelectedRepoRule": {
                        "order": 29,
                        "type": "boolean",
                        "default": false,
                        "description": "When enabled, the currently selected repository rule will be previewed in the current window, regardless of whether the workspace matches that rule. This allows you to test how a rule looks before applying it to a repository.",
                        "scope": "window"
                    },
                    "windowColors.lastExportPath": {
                        "order": 30,
                        "type": "string",
                        "default": "",
                        "description": "Last directory used for exporting configuration (internal setting)",
                        "scope": "window"
                    },
                    "windowColors.lastImportPath": {
                        "order": 31,
                        "type": "string",
                        "default": "",
                        "description": "Last directory used for importing configuration (internal setting)",
                        "scope": "window"
                    },
                    "windowColors.advancedProfiles": {
                        "order": 32,
                        "markdownDescription": "Named configuration profiles for Advanced Mode.",
                        "type": "object",
                        "default": {},
                        "scope": "window",
                        "additionalProperties": {
                            "type": "object",
                            "properties": {
                                "palette": {
                                    "type": "object",
                                    "description": "Definitions for the reference color slots",
                                    "additionalProperties": {
                                        "type": "object",
                                        "properties": {
                                            "source": {
                                                "type": "string",
                                                "enum": [
                                                    "fixed"
                                                ]
                                            },
                                            "value": {
                                                "type": "string",
                                                "description": "Hex color value (for source='fixed')"
                                            }
                                        },
                                        "required": [
                                            "source"
                                        ]
                                    }
                                },
                                "mappings": {
                                    "type": "object",
                                    "description": "Maps VS Code keys to palette slots",
                                    "additionalProperties": {
                                        "oneOf": [
                                            {
                                                "type": "string",
                                                "description": "Palette slot name or 'none'"
                                            },
                                            {
                                                "type": "object",
                                                "description": "Mapping with opacity and/or fixed color",
                                                "properties": {
                                                    "slot": {
                                                        "type": "string",
                                                        "description": "Palette slot name or '__fixed__'"
                                                    },
                                                    "opacity": {
                                                        "type": "number",
                                                        "description": "Opacity value (0.0 to 1.0)",
                                                        "minimum": 0,
                                                        "maximum": 1
                                                    },
                                                    "fixedColor": {
                                                        "type": "string",
                                                        "description": "Fixed color value (when slot is '__fixed__')"
                                                    }
                                                },
                                                "required": [
                                                    "slot"
                                                ]
                                            }
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        ]
    },
    "scripts": {
        "compile": "webpack --mode development",
        "watch": "webpack --mode development --watch",
        "vscode:prepublish": "yarn run compile",
        "package": "vsce package --yarn",
        "publish-release": "yarn version --patch --no-git-tag-version && yarn vsce publish",
        "prepublish": "",
        "publish-prerelease": "yarn version --patch --no-git-tag-version && yarn vsce publish --pre-release"
    },
    "devDependencies": {
        "@types/chroma-js": "^2.4.4",
        "@types/color": "^4.2.0",
        "@types/fs-extra": "^11.0.4",
        "@types/mocha": "^10.0.7",
        "@types/node": "^20.x",
        "@types/vscode": "^1.90.0",
        "copy-webpack-plugin": "^13.0.1",
        "prettier": "^3.3.3",
        "ts-loader": "^9.5.1",
        "typescript": "^5.6.2",
        "webpack": "^5.96.1",
        "webpack-cli": "^5.1.4"
    },
    "dependencies": {
        "@vscode/codicons": "^0.0.44",
        "@vscode/vsce": "^3.2.1",
        "chroma-js": "^3.1.2",
        "color": "^3.2.1",
        "fs-extra": "^11.2.0",
        "minimatch": "^10.1.2"
    }
}
