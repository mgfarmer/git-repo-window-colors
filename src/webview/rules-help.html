<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rules Help</title>
    <link rel="stylesheet" href="help.css">
</head>
<body>
    <div class="help-content">
        <div class="help-toc">
            <h3>Help Topics</h3>
            <ul>
                <li><a href="#" data-switch-help="getting-started">Getting Started</a></li>
                <li><a class="current">Rules Guide</a> (current)</li>
                <li><a href="#" data-switch-help="branch-modes">Shared Branch Tables Guide</a></li>
                <li><a href="#" data-switch-help="profile">Profiles Guide</a></li>
                <li><a href="#" data-switch-help="starred">Starred Keys Guide</a></li>
                <li><a href="#" data-switch-help="colored">Colored Keys Guide</a></li>
                <li><a href="#" data-switch-help="report">Color Report Guide</a></li>
            </ul>
        </div>
        <h1>Rules Guide</h1>
        
        <h2>What are Rules?</h2>
        <p>
            Rules allow you to automatically apply colors to VS Code based on which repository or branch you're working in. 
            There are two types of rules: <strong>Repository Rules</strong> and <strong>Branch Rules</strong>.
        </p>

        <h2>Repository Rules</h2>
        <p>
            Repository rules match against your repository's URL and apply colors to the VS Code window. 
            Rules are processed from top to bottom, and the <strong>first matching rule</strong> is applied.
        </p>

        <h3>Repository Rule Fields</h3>
        
        <h4>Repository Qualifier</h4>
        <p>
            A substring to match against your repository URL or local folder path. Rules are processed from top to bottom, 
            and the <strong>first matching rule</strong> is applied.
        </p>
        
        <h5>Git Repository Matching</h5>
        <p>
            For git repositories, provide a substring to match against your repository's URL. 
            This is <strong>not</strong> a regular expression‚Äîit's a simple text match.
        </p>
        <div class="example">
            <strong>Git Examples:</strong><br>
            ‚Ä¢ <code>myproject</code> - Matches any repo with "myproject" in the URL<br>
            ‚Ä¢ <code>github.com/user/repo</code> - Matches that specific GitHub repository<br>
            ‚Ä¢ <code>work-client</code> - Matches repos containing "work-client"
        </div>
        <div class="note">
            <strong>Important:</strong> Repository rules match against the actual <strong>git repository URL</strong> 
            (the remote origin URL), not the folder name where you cloned the repository. The folder name on your 
            local disk is irrelevant to matching. For example:
            <ul style="margin-top: 8px; margin-bottom: 0;">
                <li>Repository URL: <code>https://github.com/user/awesome-project.git</code></li>
                <li>Cloned into folder: <code>C:\temp\test123</code></li>
                <li>Rule qualifier: <code>awesome-project</code> will match ‚úì</li>
                <li>Rule qualifier: <code>test123</code> will NOT match ‚úó</li>
            </ul>
        </div>

        <h5>Local Folder Matching</h5>
        <p>
            While this extension is primarily designed for git repositories, you can also create rules for local folders.
            For non-git workspaces (local folders), use a <strong>!</strong> prefix followed by a file path pattern. 
            Both exact paths and glob patterns are supported, and environment variables will be automatically expanded during matching.
        </p>
        <div class="example">
            <strong>Local Folder Examples:</strong><br>
            ‚Ä¢ <code>!~/projects/my-project</code> - Matches a specific project (~ expands to home directory)<br>
            ‚Ä¢ <code>!~/projects/*</code> - Matches any folder under ~/projects<br>
            ‚Ä¢ <code>!%USERPROFILE%\Documents\work\*</code> - Matches work folders on Windows<br>
            ‚Ä¢ <code>!$HOME/client-sites/*</code> - Matches client folders on Unix/Mac<br>
            ‚Ä¢ <code>!%LOCALAPPDATA%\Temp\*</code> - Matches temporary folders on Windows<br>
            ‚Ä¢ <code>!C:\Dev\**\test</code> - Matches any "test" folder under C:\Dev at any depth
        </div>

        <div class="tip">
            <strong>Home Folder:</strong> Use ~ instead of platform specific home directory environment variables for better portability across machines.
        </div>
        
        <h6>Glob Pattern Support</h6>
        <p>
            Glob patterns allow flexible matching of file paths:
        </p>
        <ul>
            <li><code>*</code> - Matches any characters within a single directory level</li>
            <li><code>**</code> - Matches any characters across multiple directory levels</li>
            <li><code>?</code> - Matches exactly one character</li>
            <li><code>[abc]</code> - Matches any character in the brackets</li>
            <li><code>{a,b,c}</code> - Matches any of the comma-separated patterns</li>
        </ul>
        
        <h6>Environment Variable Support</h6>
        <p>
            The following environment variables are expanded automatically during path matching:
        </p>
        <ul>
            <li><code>~</code> or <code>~/</code> or <code>~\</code> - User's home directory (cross-platform)</li>
            <li><code>$HOME</code> - User's home directory (Unix/Mac)</li>
            <li><code>%USERPROFILE%</code> - User's profile directory (Windows)</li>
            <li><code>%APPDATA%</code> - Application data directory (Windows)</li>
            <li><code>%LOCALAPPDATA%</code> - Local application data directory (Windows)</li>
        </ul>
        <div class="tip">
            <strong>Path Simplification:</strong> When you add a local folder rule, paths are automatically simplified 
            to use <code>~</code> instead of the full home directory path for better readability and portability across machines.
        </div>
        <div class="warning">
            <strong>Important:</strong> Local folder rules <strong>do not support branch rules</strong> since non-git 
            workspaces don't have branches. The Branch Rules Table dropdown will be disabled for local folder rules, 
            and the branch panel will show a message indicating that branch rules are not available.
        </div>

        <h4>Primary Color</h4>
        <p>
            The color or profile applied to your VS Code window when working in this repository. 
            The Primary Color field supports two modes: <strong>Simple Colors</strong> and <strong>Profiles</strong>.
        </p>

        <h5>Simple Color Mode</h5>
        <p>
            In simple mode, you specify a single color that is applied to various UI elements. This color affects:
        </p>
        <ul>
            <li>Title bar background and foreground (with auto-contrasting text)</li>
            <li>Activity bar (left sidebar) background and icons</li>
            <li>Optional: Status bar and editor tabs (if enabled in Other Settings)</li>
        </ul>
        <p>
            You can specify simple colors as:
        </p>
        <ul>
            <li><strong>Hex codes:</strong> <code>#4A90E2</code></li>
            <li><strong>Named colors:</strong> <code>blue</code>, <code>coral</code>, <code>steelblue</code>, etc.</li>
        </ul>
        <p>
            The extension applies your color to multiple UI elements with automatic contrast adjustments for text readability. 
            You can fine-tune the brightness of non-title bar elements using the <strong>Color Knob</strong> setting 
            in Other Settings (values from -10 to +10).
        </p>

        <h5>Profile Mode</h5>
        <p>
            Profiles provide advanced color schemes with fine-grained control over individual UI elements. 
            When you select a profile from the dropdown, the extension uses:
        </p>
        <ul>
            <li><strong>12 palette slots</strong> - A set of predefined colors in the profile</li>
            <li><strong>Theme key mappings</strong> - Precise assignment of which palette slot applies to each VS Code UI element</li>
            <li><strong>Opacity controls</strong> - Per-element transparency adjustments</li>
        </ul>
        <p>
            To use a profile:
        </p>
        <ol>
            <li>Create and configure a profile in the Profiles tab</li>
            <li>Type the profile name in the Primary Color field (autocomplete will help)</li>
            <li>The dropdown that appears when you start typing will list available profiles that match what you're typing</li>
        </ol>
        <div class="tip">
            <strong>Profile Benefits:</strong> Profiles let you create reusable color schemes that you can apply 
            to multiple repositories. They give you precise control over many VS Code UI elements (title bar, activity bar, 
            status bar, tabs, panels, and more), and you can adjust colors in one place to update all repositories using that profile.
        </div>

        <h5>Excluding Repositories from Coloring</h5>
        <p>
            Sometimes you want to explicitly exclude certain repositories or folders from being colored. 
            Use the special value <code>none</code> in the Primary Color field to prevent any coloring for matching workspaces.
        </p>
        <div class="example">
            <strong>Use Cases for "none":</strong><br>
            ‚Ä¢ Exclude personal projects while coloring work repositories<br>
            ‚Ä¢ Prevent coloring for specific folders that should use default VS Code theme<br>
            ‚Ä¢ Create a "catch-all" rule at the bottom that prevents coloring for unmatched repos
        </div>
        <p>
            When a rule with <code>none</code> matches:
        </p>
        <ul>
            <li>All custom window colors are removed</li>
            <li>VS Code reverts to its default theme appearance</li>
            <li>Branch rules are not applicable (the Branch Table column shows "n/a")</li>
        </ul>
        <div class="tip">
            <strong>Tip:</strong> You can select <code>none</code> from the autocomplete dropdown under the "Special" section, 
            or simply type "none" in the Primary Color field.
        </div>

        <h3>Rule Controls</h3>
        <p>Each rule has several controls on the left side:</p>
        <table>
            <thead>
                <tr>
                    <th>Control</th>
                    <th>Function</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>‚ãÆ‚ãÆ</strong> (Drag Handle)</td>
                    <td>Click and drag to reorder rules. Rules at the top take precedence.</td>
                </tr>
                <tr>
                    <td><strong>‚ñ≤</strong> (Move Up)</td>
                    <td>Move this rule up in priority</td>
                </tr>
                <tr>
                    <td><strong>‚ñº</strong> (Move Down)</td>
                    <td>Move this rule down in priority</td>
                </tr>
                <tr>
                    <td><strong>üëÅÔ∏è</strong> or <strong>‚äó</strong> (Eye)</td>
                    <td>Enable or disable this rule without deleting it</td>
                </tr>
                <tr>

                    <td><strong>üóô</strong> (Delete)</td>
                    <td>Delete this rule permanently</td>
                </tr>
            </tbody>
        </table>

        <h3>Local Folder Path Validation</h3>
        <p>
            When you create or edit local folder rules, the extension validates the paths and provides visual feedback:
        </p>
        <ul>
            <li><strong>Valid paths:</strong> Display normally without any warning indicator</li>
            <li><strong>Invalid paths:</strong> Show a yellow warning icon (‚ö†) if the path doesn't exist on your system</li>
            <li><strong>Glob patterns:</strong> Paths containing glob characters (<code>*</code>, <code>?</code>, <code>[</code>, <code>{</code>) 
                are not validated since they match multiple possible paths</li>
            <li><strong>Tooltips:</strong> Hover over the Repository Qualifier field to see the fully expanded path with all environment variables resolved</li>
        </ul>
        <div class="tip">
            <strong>Validation Tip:</strong> If you see a warning icon on a local folder rule, check that:
            <ul style="margin-top: 8px; margin-bottom: 0;">
                <li>The path exists on your system</li>
                <li>Environment variables are spelled correctly</li>
                <li>The path uses the correct format for your operating system (forward or backslashes)</li>
            </ul>
            For glob patterns, the warning will not appear even if no folders currently match the pattern.
        </div>

        <h3>Rule Selection and Preview</h3>
        <p>
            The Rules interface provides visual feedback about which rules are active and allows you to preview rules:
        </p>
        <ul>
            <li><strong>Selection highlighting:</strong> Repository rules that match the current workspace are highlighted with a colored border and background. Branch rules that match the current branch are also highlighted.</li>
            <li><strong>Branch rule display:</strong> When you select a repository rule (by clicking on it), its associated branch rules are displayed below it, making it easy to see and manage all rules for that repository.</li>
            <li><strong>Preview mode:</strong> Enable the "Preview Selected Repo Rule" option in Other Settings to preview colors when you select a rule. With this enabled:
                <ul>
                    <li>Clicking on any repository rule will temporarily apply its colors so you can see how they look</li>
                    <li>Clicking on a branch rule will temporarily apply that branch rule's colors</li>
                    <li>Click outside the rules or select a different rule to preview another color scheme</li>
                    <li>This lets you test how rules will look before enabling them or compare different color options</li>
                </ul>
            </li>
            <li><strong>Global vs. Local branch rules:</strong> Repository rules can use global branch rules (shared across all repos) or local branch rules (specific to that repository). Use the "Use Global Branch Rules" toggle to switch between modes.</li>
        </ul>
        <div class="tip">
            <strong>Preview Tip:</strong> The preview feature is great for testing color schemes without committing to them. Enable it in Other Settings, then click through your rules to see how each one looks in real-time.
        </div>

        <h3>Rule Matching</h3>
        <p>
            When you open a workspace, the extension checks your repository URL against each rule in order. 
            The first rule whose Repository Qualifier is found anywhere in the URL will be applied.
        </p>
        <div class="tip">
            <strong>Tip:</strong> Place more specific rules (like <code>github.com/user/specific-repo</code>) 
            above more general rules (like <code>github.com</code>) to ensure the correct rule matches.
        </div>

        <h2>Branch Rules</h2>
        <p>
            Branch rules match against your current Git branch name and apply colors to the Activity Bar. 
            They override repository colors for the Activity Bar when you're on a matching branch.
        </p>

        <h3>Branch Rule Fields</h3>

        <h4>Branch Pattern</h4>
        <p>
            A regular expression pattern to match against your current branch name. Common patterns:
        </p>
        <div class="example">
            <strong>Pattern Examples:</strong><br>
            ‚Ä¢ <code>main</code> - Matches exactly "main"<br>
            ‚Ä¢ <code>main|master</code> - Matches either "main" or "master"<br>
            ‚Ä¢ <code>feature/.*</code> - Matches any branch starting with "feature/"<br>
            ‚Ä¢ <code>.*-wip$</code> - Matches branches ending with "-wip"<br>
            ‚Ä¢ <code>release-.*</code> - Matches branches starting with "release-"
        </div>

        <h4>Color</h4>
        <p>
            The color or profile applied to VS Code when on a matching branch. Branch rules support both 
            <strong>simple colors</strong> and <strong>profiles</strong>.
        </p>

        <h5>Simple Color Mode (Branch Rules)</h5>
        <p>
            When you use a simple color (hex, RGB, or named color), the color is applied <strong>only to the Activity Bar</strong>. 
            This provides a visual indicator of your current branch without affecting the rest of the window.
        </p>

        <h5>Profile Mode (Branch Rules)</h5>
        <p>
            When you assign a profile to a branch rule, the profile's color scheme is applied to multiple VS Code UI elements 
            (title bar, activity bar, status bar, tabs, etc.) based on the profile's configuration. This provides comprehensive 
            theming for branch-specific work.
        </p>

        <h5>Excluding Branches from Coloring</h5>
        <p>
            Use <code>none</code> as the color value to skip branch-specific coloring for certain branches. 
            This lets the repository rule's colors apply without any branch override.
        </p>
        <div class="example">
            <strong>Example:</strong> You want all feature branches to be green, except for one specific branch 
            that should use the repository's default color:
            <ul style="margin-top: 8px; margin-bottom: 0;">
                <li>Branch pattern: <code>feature/experimental</code> ‚Üí Color: <code>none</code></li>
                <li>Branch pattern: <code>feature/.*</code> ‚Üí Color: <code>green</code></li>
            </ul>
            Without the first rule, <code>feature/experimental</code> would match the second pattern and be colored green. 
            By placing a specific <code>none</code> rule first, that branch is excluded while all other feature branches 
            are still colored.
        </div>

        <div class="note">
            <strong>How Branch Rules Work:</strong> When you're on a branch that matches a branch rule:
            <ul style="margin-top: 8px; margin-bottom: 0;">
                <li><strong>With simple colors:</strong> The color affects only the Activity Bar, while the repository rule continues to control the title bar and other elements</li>
                <li><strong>With profiles:</strong> The branch profile takes over UI element coloring, replacing the repository rule's colors</li>
            </ul>
        </div>

        <h3>Rule Priority</h3>
        <p>
            Like repository rules, branch rules are processed top to bottom, and the first match is used. 
            Reorder rules to control which pattern takes precedence.
        </p>

        <h2>Working with Colors</h2>

        <h3>Color Picker</h3>
        <h3>Color Picker Features</h3>
        <p>
            Each color field includes:
        </p>
        <ul>
            <li><strong>Color swatch:</strong> Click to open the native color picker. Shift-click to assign a random color.</li>
            <li><strong>Text input:</strong> Type colors manually (hex, RGB, names, or profile names)</li>
            <li><strong>Autocomplete dropdown:</strong> Start typing in any color field to see a dropdown with:
                <ul>
                    <li><strong>Matching profiles:</strong> Profiles whose names match what you're typing</li>
                    <li><strong>Recent colors:</strong> Colors you've used recently</li>
                    <li><strong>HTML color names:</strong> Named colors like "blue", "coral", etc.</li>
                </ul>
            </li>
            <li><strong>Keyboard navigation:</strong> Use ‚Üë/‚Üì arrows to navigate the dropdown, Enter to select, Esc to close</li>
        </ul>
        <div class="tip">
            <strong>Quick Selection:</strong> The autocomplete dropdown appears in both repository and branch rule color fields. Just start typing and select from the list‚Äîno need to type the full profile name or color value.
        </div>

        <h3>Choosing Between Simple Colors and Profiles</h3>
        <p>
            <strong>Use Simple Colors when:</strong>
        </p>
        <ul>
            <li>You want a quick, straightforward setup</li>
            <li>You're okay with the extension's automatic UI element coloring</li>
            <li>You want different colors for each repository without reusing schemes</li>
            <li>You don't need fine control over individual UI elements</li>
        </ul>
        <p>
            <strong>Use Profiles when:</strong>
        </p>
        <ul>
            <li>You want to reuse the same color scheme across multiple repositories</li>
            <li>You need precise control over specific UI elements (tabs, status bar, etc.)</li>
            <li>You want to adjust opacity or have different colors for active/inactive elements</li>
            <li>You have multiple projects that should share the same visual theme</li>
            <li>You want to update colors in one place and have them apply to all matching repositories</li>
        </ul>
        <div class="tip">
            <strong>Tip:</strong> You can mix both approaches‚Äîuse simple colors for most repositories 
            and profiles for special cases where you need more control or want consistency across multiple repos.
        </div>

        <h2>Best Practices</h2>
        <ul>
            <li><strong>Order matters:</strong> Place specific rules before general ones</li>
            <li><strong>Use meaningful qualifiers:</strong> Choose substrings that uniquely identify repositories</li>
            <li><strong>Choose distinct colors:</strong> Use different colors for different projects to easily identify which repo you're in</li>
            <li><strong>Test patterns:</strong> For branch rules, test your regex patterns to ensure they match as expected</li>
            <li><strong>Disable instead of delete:</strong> Use the eye button to temporarily disable rules while testing</li>
            <li><strong>Keep it simple:</strong> Start with repository rules before adding branch-specific coloring</li>
        </ul>

        <h2>Keyboard Shortcuts</h2>
        <table>
            <thead>
                <tr>
                    <th>Shortcut</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>Ctrl+Alt+R</code> (or <code>Cmd+Alt+R</code>)</td>
                    <td>Add a new repository rule</td>
                </tr>
                <tr>
                    <td><code>Ctrl+Alt+B</code> (or <code>Cmd+Alt+B</code>)</td>
                    <td>Add a new branch rule</td>
                </tr>
            </tbody>
        </table>

        <h2>Troubleshooting</h2>
        
        <h3>My rule isn't matching</h3>
        <ul>
            <li>Check that the Repository Qualifier is a substring of your repo URL (visible in the title bar)</li>
            <li>Look for a rule above it that might be matching first</li>
            <li>Ensure the rule is enabled (eye icon should be üëÅÔ∏è, not ‚äó)</li>
            <li>Check the Color Report tab to see which rule is currently matched</li>
        </ul>

        <h3>Branch rule not applying</h3>
        <ul>
            <li>Verify you have a repository rule matched (branch rules only affect Activity Bar, not the whole window)</li>
            <li>Check that your branch pattern is correct regex syntax</li>
            <li>Ensure you're on a Git branch (not detached HEAD)</li>
            <li>Look for a higher-priority branch rule that might be matching instead</li>
        </ul>

        <h3>Colors look wrong</h3>
        <ul>
            <li>Check the Color Report tab to see exactly what colors are being applied</li>
            <li>Verify color format is valid (hex codes should start with #)</li>
            <li>If using profiles, ensure the profile is properly configured</li>
            <li>Check Other Settings for options like "Color Status Bar" and "Color Editor Tabs"</li>
        </ul>

        <div class="tip">
            <strong>Pro Tip:</strong> Use the Color Report tab to see exactly which rules are being applied 
            and which theme keys are being colored. This is invaluable for debugging rule matching issues.
        </div>
    </div>
</body>
</html>
