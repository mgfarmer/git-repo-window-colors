<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Auto-complete Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: #1e1e1e;
            color: #ffffff;
        }
        
        .color-input {
            padding: 8px;
            border: 1px solid #444;
            background: #2d2d30;
            color: #ffffff;
            border-radius: 3px;
            width: 200px;
        }
        
        /* Copy the auto-complete styles from our CSS */
        .color-autocomplete-dropdown {
            position: absolute;
            background: #252526;
            border: 1px solid #444;
            border-radius: 3px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .color-autocomplete-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 4px 8px;
            cursor: pointer;
            color: #ffffff;
            border-bottom: 1px solid #444;
        }

        .color-autocomplete-item:last-child {
            border-bottom: none;
        }

        .color-autocomplete-item:hover,
        .color-autocomplete-item.selected {
            background: #094771;
        }

        .color-preview {
            width: 16px;
            height: 16px;
            border-radius: 2px;
            border: 1px solid #444;
            flex-shrink: 0;
            margin-left: auto;
        }
    </style>
</head>
<body>
    <h1>Color Auto-complete Test</h1>
    <p>Type a color name (e.g., "blue", "red", "green") to test auto-complete:</p>
    <input type="text" class="color-input text-input" placeholder="Type a color name...">

    <script>
        // Copy the color names and auto-complete logic from our implementation
        const HTML_COLOR_NAMES = [
            'aliceblue', 'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige', 'bisque', 'black', 
            'blanchedalmond', 'blue', 'blueviolet', 'brown', 'burlywood', 'cadetblue', 'chartreuse', 
            'chocolate', 'coral', 'cornflowerblue', 'cornsilk', 'crimson', 'cyan', 'darkblue', 
            'darkcyan', 'darkgoldenrod', 'darkgray', 'darkgreen', 'darkkhaki', 'darkmagenta', 
            'darkolivegreen', 'darkorange', 'darkorchid', 'darkred', 'darksalmon', 'darkseagreen', 
            'darkslateblue', 'darkslategray', 'darkturquoise', 'darkviolet', 'deeppink', 'deepskyblue', 
            'dimgray', 'dodgerblue', 'firebrick', 'floralwhite', 'forestgreen', 'fuchsia', 'gainsboro', 
            'ghostwhite', 'gold', 'goldenrod', 'gray', 'green', 'greenyellow', 'honeydew', 'hotpink', 
            'indianred', 'indigo', 'ivory', 'khaki', 'lavender', 'lavenderblush', 'lawngreen', 
            'lemonchiffon', 'lightblue', 'lightcoral', 'lightcyan', 'lightgoldenrodyellow', 'lightgray', 
            'lightgreen', 'lightpink', 'lightsalmon', 'lightseagreen', 'lightskyblue', 'lightslategray', 
            'lightsteelblue', 'lightyellow', 'lime', 'limegreen', 'linen', 'magenta', 'maroon', 
            'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple', 'mediumseagreen', 
            'mediumslateblue', 'mediumspringgreen', 'mediumturquoise', 'mediumvioletred', 'midnightblue', 
            'mintcream', 'mistyrose', 'moccasin', 'navajowhite', 'navy', 'oldlace', 'olive', 'olivedrab', 
            'orange', 'orangered', 'orchid', 'palegoldenrod', 'palegreen', 'paleturquoise', 
            'palevioletred', 'papayawhip', 'peachpuff', 'peru', 'pink', 'plum', 'powderblue', 'purple', 
            'red', 'rosybrown', 'royalblue', 'saddlebrown', 'salmon', 'sandybrown', 'seagreen', 
            'seashell', 'sienna', 'silver', 'skyblue', 'slateblue', 'slategray', 'snow', 'springgreen', 
            'steelblue', 'tan', 'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat', 'white', 
            'whitesmoke', 'yellow', 'yellowgreen'
        ];

        let activeAutoCompleteInput = null;
        let autoCompleteDropdown = null;
        let selectedSuggestionIndex = -1;

        function handleColorInputAutoComplete(input) {
            const value = input.value.toLowerCase().trim();
            
            if (value.length === 0) {
                hideAutoCompleteDropdown();
                return;
            }

            const matches = HTML_COLOR_NAMES.filter(colorName => 
                colorName.toLowerCase().startsWith(value) && colorName.toLowerCase() !== value
            );

            if (matches.length === 0) {
                hideAutoCompleteDropdown();
                return;
            }

            showAutoCompleteDropdown(input, matches.slice(0, 10));
        }

        function showAutoCompleteDropdown(input, suggestions) {
            hideAutoCompleteDropdown();

            const dropdown = document.createElement('div');
            dropdown.className = 'color-autocomplete-dropdown';

            suggestions.forEach((suggestion, index) => {
                const item = document.createElement('div');
                item.className = 'color-autocomplete-item';
                item.textContent = suggestion;
                
                const preview = document.createElement('span');
                preview.className = 'color-preview';
                preview.style.backgroundColor = suggestion;
                item.appendChild(preview);

                item.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    selectAutoCompleteSuggestion(input, suggestion);
                });

                dropdown.appendChild(item);
            });

            const inputRect = input.getBoundingClientRect();
            dropdown.style.position = 'absolute';
            dropdown.style.top = (inputRect.bottom + window.scrollY) + 'px';
            dropdown.style.left = (inputRect.left + window.scrollX) + 'px';
            dropdown.style.width = Math.max(inputRect.width, 200) + 'px';

            document.body.appendChild(dropdown);
            
            activeAutoCompleteInput = input;
            autoCompleteDropdown = dropdown;
            selectedSuggestionIndex = -1;
        }

        function hideAutoCompleteDropdown() {
            if (autoCompleteDropdown) {
                document.body.removeChild(autoCompleteDropdown);
                autoCompleteDropdown = null;
            }
            activeAutoCompleteInput = null;
            selectedSuggestionIndex = -1;
        }

        function selectAutoCompleteSuggestion(input, colorName) {
            input.value = colorName;
            hideAutoCompleteDropdown();
            input.focus();
            
            // Change background to show the selected color
            document.body.style.backgroundColor = colorName;
        }

        // Event listeners
        document.addEventListener('input', (event) => {
            if (event.target.classList.contains('color-input')) {
                handleColorInputAutoComplete(event.target);
            }
        });

        document.addEventListener('click', (event) => {
            if (autoCompleteDropdown && !autoCompleteDropdown.contains(event.target) && 
                event.target !== activeAutoCompleteInput) {
                hideAutoCompleteDropdown();
            }
        });
    </script>
</body>
</html>
